# rublock-tor-debian12

**ะะฒัะพะผะฐัะธัะตัะบะธะน ะพะฑัะพะด ะฑะปะพะบะธัะพะฒะพะบ ัะตัะตะท Tor ะฝะฐ Debian 12**

ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตั ััะฐัะธะบ ะบ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะผ ัะตััััะฐะผ ัะตัะตะท Tor, ะธัะฟะพะปัะทัั ะฐะบััะฐะปัะฝัะต ัะฟะธัะบะธ ะฑะปะพะบะธัะพะฒะพะบ ะธะท ะฝะตัะบะพะปัะบะธั ะธััะพัะฝะธะบะพะฒ. ะะฑััะฝัะน ััะฐัะธะบ ะธะดัั ะฝะฐะฟััะผัั, ะฑะตะท ะทะฐะผะตะดะปะตะฝะธั.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Debian](https://img.shields.io/badge/Debian-12-red.svg)](https://www.debian.org/)
[![Tor](https://img.shields.io/badge/Tor-anonymity-purple.svg)](https://www.torproject.org/)

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะะพะทะผะพะถะฝะพััะธ](#-ะฒะพะทะผะพะถะฝะพััะธ)
- [ะััะธัะตะบัััะฐ](#-ะฐััะธัะตะบัััะฐ)
- [ะขัะตะฑะพะฒะฐะฝะธั](#-ััะตะฑะพะฒะฐะฝะธั)
- [ะััััะฐั ัััะฐะฝะพะฒะบะฐ](#-ะฑััััะฐั-ัััะฐะฝะพะฒะบะฐ)
- [ะะพะดัะพะฑะฝะฐั ัััะฐะฝะพะฒะบะฐ](#-ะฟะพะดัะพะฑะฝะฐั-ัััะฐะฝะพะฒะบะฐ)
- [ะัะฟะพะปัะทะพะฒะฐะฝะธะต](#-ะธัะฟะพะปัะทะพะฒะฐะฝะธะต)
- [ะะฐัััะพะนะบะฐ](#-ะฝะฐัััะพะนะบะฐ)
- [ะฃะฟัะฐะฒะปะตะฝะธะต](#-ัะฟัะฐะฒะปะตะฝะธะต)
- [ะััะพัะฝะธะบะธ ัะฟะธัะบะพะฒ ะฑะปะพะบะธัะพะฒะพะบ](#-ะธััะพัะฝะธะบะธ-ัะฟะธัะบะพะฒ-ะฑะปะพะบะธัะพะฒะพะบ)
- [ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ](#-ััััะฐะฝะตะฝะธะต-ะฝะตะฟะพะปะฐะดะพะบ)
- [FAQ](#-faq)
- [ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั](#-ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั)
- [ะะตะทะพะฟะฐัะฝะพััั](#-ะฑะตะทะพะฟะฐัะฝะพััั)
- [ะะปะฐะณะพะดะฐัะฝะพััะธ](#-ะฑะปะฐะณะพะดะฐัะฝะพััะธ)
- [ะะธัะตะฝะทะธั](#-ะปะธัะตะฝะทะธั)

## ๐ ะะพะทะผะพะถะฝะพััะธ

- โ **ะะฒัะพะผะฐัะธัะตัะบะธะน ะพะฑัะพะด**: ~1 ะผะปะฝ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัั ะดะพะผะตะฝะพะฒ ะธ IP
- โ **ะัะพะทัะฐัะฝะพััั**: ะพะฑััะฝัะน ััะฐัะธะบ ะธะดัั ะฝะฐะฟััะผัั (ะฝะต ัะพัะผะพะทะธั)
- โ **ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต**: ัะฟะธัะบะธ ะพะฑะฝะพะฒะปััััั ะตะถะตะดะฝะตะฒะฝะพ
- โ **ะะตัะบะพะปัะบะพ ะธััะพัะฝะธะบะพะฒ**: antifilter, antizapret, zapret-info, rublacklist
- โ **ะกะตัะตะฒะพะน ะดะพัััะฟ**: ัะฐะฑะพัะฐะตั ะดะปั ะฒัะตั ััััะพะนััะฒ ะฒ ะปะพะบะฐะปัะฝะพะน ัะตัะธ
- โ **IPv6 ะฟะพะดะดะตัะถะบะฐ**: ะฟะพะปะฝะฐั ะฟะพะดะดะตัะถะบะฐ IPv4 ะธ IPv6
- โ **ะะธะทะบะธะต ััะตะฑะพะฒะฐะฝะธั**: ัะฐะฑะพัะฐะตั ะฝะฐ ัะปะฐะฑะพะผ ะถะตะปะตะทะต
- โ **ะฃะผะฝะฐั ัะธะปัััะฐัะธั**: ะณััะฟะฟะธัะพะฒะบะฐ ะฟะพะดะดะพะผะตะฝะพะฒ, ะธัะบะปััะตะฝะธะต ะฟะพะฟัะปััะฝัั ัะตัะฒะธัะพะฒ

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     ะัะพะดััะธะน ััะฐัะธะบ                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
              โโโโโโโโโโโโโโโโโโโโโโโโ
              โ  dnsmasq (port 53)   โ โโโโ DNS ะทะฐะฟัะพัั
              โ  โข 958K+ ะดะพะผะตะฝะพะฒ     โ
              โโโโโโโโโโโโฌโโโโโโโโโโโโ
                         โ
         โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
         โ                               โ
         โผ                               โผ
   ะะฐะฑะปะพะบะธัะพะฒะฐะฝ?                   ะะฑััะฝัะน ะดะพะผะตะฝ
         โ                               โ
         โ                               โผ
         โ                         ะััะผะพะน ะดะพัััะฟ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโ
โ  ipset             โ
โ  โข rublack-dns     โ โโโโ ะะธะฝะฐะผะธัะตัะบะธะต IP ะธะท DNS
โ  โข rublack-ip      โ โโโโ 969K+ ััะฐัะธัะตัะบะธั IP
โโโโโโโโโโฌโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโ
โ  iptables (NAT)    โ
โ  REDIRECT โ 9040   โ
โโโโโโโโโโฌโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโ
โ  Tor TransPort     โ
โ  127.0.0.1:9040    โ โโโโ ะัะพะทัะฐัะฝัะน ะฟัะพะบัะธ
โ  192.168.x.x:9040  โ
โโโโโโโโโโฌโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโ
โ  Tor Network       โ
โ  ะะฝะพะฝะธะผะฝัะน ะฒััะพะด   โ
โโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพะผะฟะพะฝะตะฝัั

| ะะพะผะฟะพะฝะตะฝั | ะะพะปั | ะะพััั |
|-----------|------|-------|
| **dnsmasq** | DNS-ัะตัะฒะตั ั ัะธะปัััะฐัะธะตะน | 53 (TCP/UDP) |
| **Tor** | ะะฝะพะฝะธะผะฝะฐั ัะตัั | 9040 (TransPort), 9050 (SOCKS), 9053 (DNS) |
| **ipset** | ะฅัะฐะฝะธะปะธัะต IP-ะฐะดัะตัะพะฒ | - |
| **iptables** | ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ััะฐัะธะบะฐ | - |
| **Lua ัะบัะธะฟั** | ะะฑะฝะพะฒะปะตะฝะธะต ัะฟะธัะบะพะฒ | - |

## ๐ฆ ะขัะตะฑะพะฒะฐะฝะธั

### ะกะธััะตะผะฝัะต ััะตะฑะพะฒะฐะฝะธั

- **ะะก**: Debian 12 (Bookworm)
- **RAM**: ะผะธะฝะธะผัะผ 512 MB (ัะตะบะพะผะตะฝะดัะตััั 1 GB)
- **ะะธัะบ**: 200 MB ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ
- **CPU**: ะปัะฑะพะน (ะดะฐะถะต Raspberry Pi)
- **ะกะตัั**: ััะฐะฑะธะปัะฝะพะต ะธะฝัะตัะฝะตั-ัะพะตะดะธะฝะตะฝะธะต

### ะะตะพะฑัะพะดะธะผัะต ะฟะฐะบะตัั

ะฃััะฐะฝะฐะฒะปะธะฒะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ:
```
tor tor-geoipdb obfs4proxy dnsmasq ipset iptables-persistent 
ca-certificates curl lua5.4 lua-socket lua-sec
```

## โก ะััััะฐั ัััะฐะฝะพะฒะบะฐ

```bash
# 1. ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน
git clone https://github.com/grashooper/rublock-tor-debian12.git
cd rublock-tor-debian12/debian

# 2. ะะฐะฟัััะธัั ัััะฐะฝะพะฒะบั (ะพั root)
sudo ./install_debian12.sh

# 3. ะกะปะตะดะพะฒะฐัั ะธะฝััััะบัะธัะผ ัััะฐะฝะพะฒัะธะบะฐ
```

ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฝะธะผะฐะตั 3-5 ะผะธะฝัั.

## ๐ ะะพะดัะพะฑะฝะฐั ัััะฐะฝะพะฒะบะฐ

### ะจะฐะณ 1: ะะพะดะณะพัะพะฒะบะฐ ัะธััะตะผั

```bash
# ะะฑะฝะพะฒะธัั ัะธััะตะผั
sudo apt update && sudo apt upgrade -y

# ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน
git clone https://github.com/grashooper/rublock-tor-debian12.git
cd rublock-tor-debian12/debian
```

### ะจะฐะณ 2: ะะฐะฟััะบ ัััะฐะฝะพะฒัะธะบะฐ

```bash
sudo ./install_debian12.sh
```

ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ:
1. **ะะฟัะตะดะตะปะธั** ะปะพะบะฐะปัะฝัะน IP-ะฐะดัะตั
2. **ะฃััะฐะฝะพะฒะธั** ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต ะฟะฐะบะตัั
3. **ะะฐัััะพะธั** Tor, dnsmasq, iptables
4. **ะกะบะฐัะฐะตั** ะฐะบััะฐะปัะฝัะต ัะฟะธัะบะธ ะฑะปะพะบะธัะพะฒะพะบ
5. **ะกะพะทะดะฐัั** systemd ัะฐะนะผะตั ะดะปั ะฐะฒัะพะพะฑะฝะพะฒะปะตะฝะธั

### ะจะฐะณ 3: ะัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ

```bash
# ะัะพะฒะตัะธัั ััะฐััั ัะตัะฒะธัะพะฒ
systemctl status tor dnsmasq rublock-update.timer

# ะัะพะฒะตัะธัั ะบะพะปะธัะตััะฒะพ ะทะฐะฟะธัะตะน
echo "ะะพะผะตะฝะพะฒ: $(wc -l < /etc/rublock/runblock.dnsmasq)"
echo "IP-ะฐะดัะตัะพะฒ: $(ipset list rublack-ip | grep -c '^[0-9]')"

# ะัะพะฒะตัะธัั ัะฐะฑะพัั Tor
curl --socks5 127.0.0.1:9050 https://check.torproject.org/api/ip
```

ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:
```json
{"IsTor":true,"IP":"xxx.xxx.xxx.xxx"}
```

## ๐ฏ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะฐ ัะตัะฒะตัะต (ะปะพะบะฐะปัะฝะพ)

ะะพัะปะต ัััะฐะฝะพะฒะบะธ ะฒัะต ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะต ัะฐะนัั ัะฐะฑะพัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ:

```bash
# ะัะพะฒะตัะธัั ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะน ัะฐะนั
curl -I https://rutube.ru

# ะัะพะฒะตัะธัั ะพะฑััะฝัะน ัะฐะนั (ะธะดัั ะฝะฐะฟััะผัั)
curl -I https://google.com
```

### ะะฐ ะดััะณะธั ััััะพะนััะฒะฐั ะฒ ัะตัะธ

#### ะะฐัะธะฐะฝั ะ: ะะฒัะพะผะฐัะธัะตัะบะธ ัะตัะตะท DNS

ะะฐ ะบะปะธะตะฝััะบะพะผ ััััะพะนััะฒะต ัะบะฐะถะธัะต DNS-ัะตัะฒะตั:

**Linux/macOS:**
```bash
# ะัะตะผะตะฝะฝะพ
sudo echo "nameserver 192.168.2.11" > /etc/resolv.conf

# ะะพััะพัะฝะฝะพ (NetworkManager)
nmcli con mod "ะะฐัะต ะฟะพะดะบะปััะตะฝะธะต" ipv4.dns "192.168.2.11"
nmcli con up "ะะฐัะต ะฟะพะดะบะปััะตะฝะธะต"
```

**Windows:**
```
ะะฐะฝะตะปั ัะฟัะฐะฒะปะตะฝะธั โ ะกะตัั โ ะกะฒะพะนััะฒะฐ ะฐะดะฐะฟัะตัะฐ โ IPv4 โ DNS: 192.168.2.11
```

**Android/iOS:**
```
ะะฐัััะพะนะบะธ Wi-Fi โ ะะพะฟะพะปะฝะธัะตะปัะฝะพ โ DNS: 192.168.2.11
```

#### ะะฐัะธะฐะฝั ะ: ะงะตัะตะท SOCKS5 ะฟัะพะบัะธ

**Firefox:**
```
ะะฐัััะพะนะบะธ โ ะกะตัั โ ะะฐัะฐะผะตััั ะฟะพะดะบะปััะตะฝะธั
SOCKS v5: 192.168.2.11:9050
```

**Curl:**
```bash
curl --socks5 192.168.2.11:9050 https://ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะน-ัะฐะนั.com
```

**Telegram:**
```
ะะฐัััะพะนะบะธ โ ะะฐะฝะฝัะต ะธ ะฟะฐะผััั โ ะัะพะบัะธ-ัะตัะฒะตั
SOCKS5: 192.168.2.11:9050
```

### ะะพัััะฟะฝัะต ัะตัะฒะธัั

| ะกะตัะฒะธั | ะะดัะตั | ะะฟะธัะฐะฝะธะต |
|--------|-------|----------|
| **DNS** | `127.0.0.1:53`<br>`192.168.2.11:53` | DNS ั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัะธะปัััะฐัะธะตะน |
| **SOCKS5** | `127.0.0.1:9050`<br>`192.168.2.11:9050` | ะัะพะบัะธ ะดะปั ะปัะฑัั ะฟัะธะปะพะถะตะฝะธะน |
| **TransPort** | `127.0.0.1:9040`<br>`192.168.2.11:9040` | ะัะพะทัะฐัะฝัะน ะฟัะพะบัะธ (ะธัะฟะพะปัะทัะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ) |
| **Tor DNS** | `127.0.0.1:9053`<br>`192.168.2.11:9053` | DNS ะฝะฐะฟััะผัั ัะตัะตะท Tor |

## โ๏ธ ะะฐัััะพะนะบะฐ

### ะะทะผะตะฝะตะฝะธะต ะธััะพัะฝะธะบะฐ ัะฟะธัะบะพะฒ

ะััะตะดะฐะบัะธััะนัะต `/usr/local/lib/rublock/rublupdate.lua`:

```lua
local config = {
    blSource = "antifilter", -- ะะฐัะธะฐะฝัั: antifilter, antizapret, zapret-info, rublacklist
    -- ...
}
```

ะะพัััะฟะฝัะต ะธััะพัะฝะธะบะธ:

| ะััะพัะฝะธะบ | ะะฟะธัะฐะฝะธะต | ะะฐะทะผะตั ัะฟะธัะบะฐ |
|----------|----------|---------------|
| `antifilter` | ะกะฟะธัะบะธ antifilter.download | ~900K ะทะฐะฟะธัะตะน |
| `antizapret` | API antizapret.info | ~800K ะทะฐะฟะธัะตะน |
| `zapret-info` | GitHub zapret-info | ~1M ะทะฐะฟะธัะตะน |
| `rublacklist` | ะะตะตััั rublacklist.net | ~500K ะทะฐะฟะธัะตะน (ัะฐััะพ ะฝะตะดะพัััะฟะตะฝ) |

### ะะฐัััะพะนะบะฐ Tor

ะะพะฝัะธะณััะฐัะธั ะฒ `/etc/tor/torrc`:

```conf
# ะัะบะปััะธัั ะพะฟัะตะดะตะปัะฝะฝัะต ัััะฐะฝั ะธะท ะฒััะพะดะฝัั ัะทะปะพะฒ
ExcludeExitNodes {RU},{BY},{KG},{KZ},{UZ},{TJ},{TM},{TR},{AZ},{AM},{UA}

# ะัะฟะพะปัะทะพะฒะฐัั ัะพะปัะบะพ ะพะฟัะตะดะตะปัะฝะฝัะต ัััะฐะฝั
# ExitNodes {PL},{DE},{NL}
# StrictNodes 1

# ะะพััั obfs4 (ะตัะปะธ Tor ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ)
# ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy
# UseBridges 1
# Bridge obfs4 IP:PORT FINGERPRINT cert=CERT iat-mode=0
```

**ะะพะปััะธัั ะผะพััั:** https://bridges.torproject.org/

### ะะฐัััะพะนะบะฐ dnsmasq

ะะพะฝัะธะณััะฐัะธั ะฒ `/etc/dnsmasq.d/rublock.conf`:

```conf
# ะะทะผะตะฝะธัั upstream DNS ัะตัะฒะตัั
server=8.8.8.8
server=1.1.1.1

# ะะพะฑะฐะฒะธัั ะปะพะบะฐะปัะฝัะต ะดะพะผะตะฝั
address=/local.domain/192.168.1.100

# ะััะธัะพะฒะฐะฝะธะต
cache-size=10000
```

### ะะทะผะตะฝะตะฝะธะต ะฒัะตะผะตะฝะธ ะพะฑะฝะพะฒะปะตะฝะธั

ะััะตะดะฐะบัะธััะนัะต `/etc/systemd/system/rublock-update.timer`:

```ini
[Timer]
# ะะฑะฝะพะฒะปััั ะบะฐะถะดัะต 12 ัะฐัะพะฒ
OnCalendar=*-*-* 00,12:00:00

# ะะปะธ ัะฐะท ะฒ ะฝะตะดะตะปั ะฟะพ ะฒะพัะบัะตัะตะฝััะผ
# OnCalendar=Sun *-*-* 05:00:00
```

ะัะธะผะตะฝะธัั ะธะทะผะตะฝะตะฝะธั:
```bash
sudo systemctl daemon-reload
sudo systemctl restart rublock-update.timer
```

### ะะพะฑะฐะฒะปะตะฝะธะต ัะพะฑััะฒะตะฝะฝัั ะดะพะผะตะฝะพะฒ

```bash
# ะะพะฑะฐะฒะธัั ะดะพะผะตะฝ ะฒ ัะฟะธัะพะบ ะฑะปะพะบะธัะพะฒะพะบ
echo "my-blocked-domain.com" >> /etc/rublock/custom-domains.txt

# ะะฑะฝะพะฒะธัั ะบะพะฝัะธะณััะฐัะธั
sudo /usr/local/bin/rublock-update.sh
```

## ๐ง ะฃะฟัะฐะฒะปะตะฝะธะต

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะัะพะฒะตัะธัั ััะฐััั
sudo systemctl status tor dnsmasq rublock-update.timer

# ะะตัะตะทะฐะฟัััะธัั ัะตัะฒะธัั
sudo systemctl restart tor dnsmasq

# ะะฑะฝะพะฒะธัั ัะฟะธัะบะธ ะฒัััะฝัั
sudo /usr/local/bin/rublock-update.sh

# ะัะพะฒะตัะธัั ะปะพะณะธ
sudo journalctl -u rublock-update.service -f

# ะะพัะผะพััะตัั ัะฐัะฟะธัะฐะฝะธะต ะพะฑะฝะพะฒะปะตะฝะธะน
systemctl list-timers rublock-update.timer
```

### ะัะตะผะตะฝะฝะพะต ะพัะบะปััะตะฝะธะต

```bash
# ะััะฐะฝะพะฒะธัั ัะธะปัััะฐัะธั
sudo systemctl stop tor dnsmasq

# ะะพะทะพะฑะฝะพะฒะธัั
sudo systemctl start tor dnsmasq
```

### ะะพะปะฝะพะต ัะดะฐะปะตะฝะธะต

```bash
cd ~/rublock-tor-debian12/debian
sudo ./uninstall.sh  # ะัะปะธ ะตััั ัะบัะธะฟั ัะดะฐะปะตะฝะธั

# ะะปะธ ะฒัััะฝัั:
sudo systemctl stop tor dnsmasq rublock-update.timer
sudo systemctl disable tor dnsmasq rublock-update.timer
sudo apt remove --purge tor tor-geoipdb dnsmasq
sudo rm -rf /etc/rublock /usr/local/lib/rublock /usr/local/bin/rublock-update.sh
sudo rm -f /etc/systemd/system/rublock-update.*
sudo ipset destroy rublack-ip rublack-dns 2>/dev/null
sudo iptables -t nat -F  # ะััะพัะพะถะฝะพ! ะฃะดะฐะปะธั ะฒัะต NAT ะฟัะฐะฒะธะปะฐ
```

## ๐ ะััะพัะฝะธะบะธ ัะฟะธัะบะพะฒ ะฑะปะพะบะธัะพะฒะพะบ

### Antifilter (ะฟะพ ัะผะพะปัะฐะฝะธั)

- **URL**: https://antifilter.download/
- **ะะฑะฝะพะฒะปะตะฝะธะต**: ะฝะตัะบะพะปัะบะพ ัะฐะท ะฒ ะดะตะฝั
- **ะคะพัะผะฐั**: ัะตะบััะพะฒัะต ัะฟะธัะบะธ (ะดะพะผะตะฝั, IP, ะฟะพะดัะตัะธ)
- **ะะฐะทะผะตั**: ~900K ะทะฐะฟะธัะตะน
- **ะะฐะดัะถะฝะพััั**: โญโญโญโญโญ

### Antizapret

- **URL**: https://antizapret.info/
- **API**: https://api.antizapret.info/
- **ะะฑะฝะพะฒะปะตะฝะธะต**: ะตะถะตะดะฝะตะฒะฝะพ
- **ะะฐะทะผะตั**: ~800K ะทะฐะฟะธัะตะน
- **ะะฐะดัะถะฝะพััั**: โญโญโญโญ

### Zapret-Info

- **URL**: https://github.com/zapret-info/z-i
- **ะััะพัะฝะธะบ**: ะพัะธัะธะฐะปัะฝัะน ัะตะตััั ะะะ
- **ะะฑะฝะพะฒะปะตะฝะธะต**: ะตะถะตะดะฝะตะฒะฝะพ
- **ะะฐะทะผะตั**: ~1M ะทะฐะฟะธัะตะน
- **ะะฐะดัะถะฝะพััั**: โญโญโญโญโญ

### RuBlacklist

- **URL**: https://reestr.rublacklist.net/
- **ะกัะฐััั**: ัะฐััะพ ะฝะตะดะพัััะฟะตะฝ โ๏ธ
- **ะะฐะทะผะตั**: ~500K ะทะฐะฟะธัะตะน
- **ะะฐะดัะถะฝะพััั**: โญโญ

## ๐ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### Tor ะฝะต ะฟะพะดะบะปััะฐะตััั

```bash
# ะัะพะฒะตัะธัั ะปะพะณะธ Tor
sudo journalctl -u tor -n 50

# ะัะพะฒะตัะธัั ััะพ ะฟะพัั 9050 ัะปััะฐะตััั
sudo ss -tulnp | grep 9050

# ะะตัะตะทะฐะฟัััะธัั Tor
sudo systemctl restart tor

# ะัะปะธ Tor ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ โ ะธัะฟะพะปัะทะพะฒะฐัั ะผะพััั (ัะผ. ัะฐะทะดะตะป ะะฐัััะพะนะบะฐ)
```

### DNS ะฝะต ัะตะทะพะปะฒะธััั

```bash
# ะัะพะฒะตัะธัั ััะพ dnsmasq ัะฐะฑะพัะฐะตั
sudo systemctl status dnsmasq

# ะัะพะฒะตัะธัั ััะพ ะฟะพัั 53 ะพัะบััั
sudo ss -tulnp | grep :53

# ะัะพะฒะตัะธัั ะบะพะฝัะธะณััะฐัะธั
sudo dnsmasq --test

# ะัะพะฒะตัะธัั ัะฐะนะป ัะฟะธัะบะพะฒ
ls -lh /etc/rublock/runblock.dnsmasq
```

### ipset ะฟัััะพะน

```bash
# ะัะพะฒะตัะธัั ะฝะฐะปะธัะธะต IP
ipset list rublack-ip | head -20

# ะัะปะธ ะฟัััะพะน โ ะพะฑะฝะพะฒะธัั ัะฟะธัะบะธ
sudo /usr/local/bin/rublock-update.sh

# ะัะพะฒะตัะธัั ัะฐะนะป ipset
ls -lh /etc/rublock/runblock.ipset
head -20 /etc/rublock/runblock.ipset
```

### iptables ะฟัะฐะฒะธะปะฐ ะฝะต ะฟัะธะผะตะฝััััั

```bash
# ะัะพะฒะตัะธัั ะฟัะฐะฒะธะปะฐ
sudo iptables -t nat -L PREROUTING -n -v | grep rublack

# ะะตัะตัััะฐะฝะพะฒะธัั ะฟัะฐะฒะธะปะฐ
sudo /usr/local/bin/rublock-update.sh

# ะกะพััะฐะฝะธัั ะฟัะฐะฒะธะปะฐ
sudo netfilter-persistent save
```

### ะะฑะฝะพะฒะปะตะฝะธะต ัะฟะธัะบะพะฒ ะทะฐะฒะตััะฐะตััั ั ะพัะธะฑะบะพะน

```bash
# ะัะพะฒะตัะธัั ะปะพะณะธ
sudo journalctl -u rublock-update.service -n 100

# ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั ะธััะพัะฝะธะบะพะฒ
curl -I https://antifilter.download/list/domains.lst

# ะะพะฟัะพะฑะพะฒะฐัั ะดััะณะพะน ะธััะพัะฝะธะบ
sudo nano /usr/local/lib/rublock/rublupdate.lua
# ะะทะผะตะฝะธัั blSource = "antizapret"
```

### ะะตะดะปะตะฝะฝะฐั ัะฐะฑะพัะฐ

```bash
# ะัะพะฒะตัะธัั ััะพ ะพะฑััะฝัะน ััะฐัะธะบ ะฝะต ะธะดัั ัะตัะตะท Tor
curl -I https://google.com  # ะะพะปะถะฝะพ ะฑััั ะฑััััะพ

# ะัะพะฒะตัะธัั ัะพะปัะบะพ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะต
curl -I https://rutube.ru   # ะะพะถะตั ะฑััั ะผะตะดะปะตะฝะฝะตะต

# ะฃะผะตะฝััะธัั ัะฐะทะผะตั ipset (ะพัะบะปััะธัั ะณััะฟะฟะธัะพะฒะบั)
sudo nano /usr/local/lib/rublock/rublupdate.lua
# groupBySld = 0
```

## โ FAQ

### ะะปะธัะตั ะปะธ ััะพ ะฝะฐ ัะบะพัะพััั ะธะฝัะตัะฝะตัะฐ?

**ะะตั**, ัะพะปัะบะพ ััะฐัะธะบ ะบ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะผ ัะตััััะฐะผ ะธะดัั ัะตัะตะท Tor. ะะฑััะฝัะต ัะฐะนัั (Google, YouTube ะธ ั.ะด.) ัะฐะฑะพัะฐัั ั ะพะฑััะฝะพะน ัะบะพัะพัััั.

### ะะพะถะฝะพ ะปะธ ะธัะฟะพะปัะทะพะฒะฐัั ะฝะฐ Raspberry Pi?

**ะะฐ**, ัะธััะตะผะฐ ัะฐะฑะพัะฐะตั ะดะฐะถะต ะฝะฐ Raspberry Pi Zero. ะะตะบะพะผะตะฝะดัะตััั ะผะธะฝะธะผัะผ 512 MB RAM.

### ะะตะทะพะฟะฐัะฝะพ ะปะธ ััะพ?

**ะะฐ**, ะตัะปะธ:
- โ ะัะฟะพะปัะทัะตัะต HTTPS (ะฒัะตะณะดะฐ)
- โ ะะต ะฟะตัะตะดะฐััะต ะบัะธัะธัะฝัะต ะดะฐะฝะฝัะต ัะตัะตะท Tor
- โ ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะตัะต ัะธััะตะผั

Tor ะพะฑะตัะฟะตัะธะฒะฐะตั ะฐะฝะพะฝะธะผะฝะพััั, ะฝะพ ะฒััะพะดะฝัะต ัะทะปั ะผะพะณัั ะฒะธะดะตัั ะฝะตะทะฐัะธััะพะฒะฐะฝะฝัะน ััะฐัะธะบ.

### ะะพะถะฝะพ ะปะธ ะธัะฟะพะปัะทะพะฒะฐัั ั VPN?

**ะะฐ**, ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ัะพะฒะผะตััะฝะพ ั VPN:
- VPN โ Tor โ ะะฝัะตัะฝะตั (ัะตัะตะท rublock)
- Tor โ VPN โ ะะฝัะตัะฝะตั (ะฝะฐัััะพะธัั ะฒััะพะด Tor ัะตัะตะท VPN)

### ะงัะพ ะตัะปะธ ะผะพะน IP ะธะทะผะตะฝะธััั?

ะกะบัะธะฟั ัััะฐะฝะพะฒะบะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฟัะตะดะตะปัะตั IP ะฟัะธ ัััะฐะฝะพะฒะบะต. ะัะปะธ IP ะธะทะผะตะฝะธะปัั:

```bash
cd ~/rublock-tor-debian12/debian
sudo ./install_debian12.sh  # ะะตัะตัััะฐะฝะพะฒะธัั (ะฑะตะทะพะฟะฐัะฝะพ)
```

### ะะฐะบ ะดะพะฑะฐะฒะธัั ัะฒะพะน ัะฟะธัะพะบ ะดะพะผะตะฝะพะฒ?

ะกะพะทะดะฐะนัะต ัะฐะนะป `/etc/rublock/custom-domains.txt`:
```
domain1.com
domain2.org
*.wildcard-domain.net
```

ะะพะฑะฐะฒััะต ะฒ `/usr/local/bin/rublock-update.sh`:
```bash
# ะะพัะปะต ะณะตะฝะตัะฐัะธะธ ัะฟะธัะบะพะฒ
if [[ -f /etc/rublock/custom-domains.txt ]]; then
    cat /etc/rublock/custom-domains.txt >> /etc/rublock/runblock.dnsmasq
fi
```

### ะะพะณะธััะตััั ะปะธ ััะฐัะธะบ?

**ะะตั**, ะฟะพ ัะผะพะปัะฐะฝะธั:
- dnsmasq ะฝะต ะปะพะณะธััะตั ะทะฐะฟัะพัั
- Tor ะฝะต ะปะพะณะธััะตั ััะฐัะธะบ
- iptables ะฝะต ะปะพะณะธััะตั ะฟะฐะบะตัั

ะะปั ะฒะบะปััะตะฝะธั ะปะพะณะธัะพะฒะฐะฝะธั (ะพัะปะฐะดะบะฐ):
```bash
# dnsmasq
echo "log-queries" >> /etc/dnsmasq.d/rublock.conf

# Tor
echo "Log notice file /var/log/tor/notices.log" >> /etc/tor/torrc
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะพััะตะฑะปะตะฝะธะต ัะตััััะพะฒ

| ะกะตัะฒะธั | RAM | CPU | ะะธัะบ |
|--------|-----|-----|------|
| dnsmasq | 120 MB | <1% | 50 MB |
| Tor | 80 MB | 2-5% | 100 MB |
| ipset | 50 MB | 0% | - |
| **ะัะพะณะพ** | ~250 MB | <5% | ~200 MB |

### ะกะบะพัะพััั ัะฐะฑะพัั

- **DNS ัะตะทะพะปะฒะธะฝะณ**: <10 ะผั (ะปะพะบะฐะปัะฝะพ)
- **Tor ัะพะตะดะธะฝะตะฝะธะต**: 500-3000 ะผั (ะฟะตัะฒะพะต ะฟะพะดะบะปััะตะฝะธะต)
- **ะะตัะตะดะฐัะฐ ะดะฐะฝะฝัั**: 1-10 Mbps (ะทะฐะฒะธัะธั ะพั Tor ัะตัะธ)
- **ะะฑััะฝัะน ััะฐัะธะบ**: ะฑะตะท ะทะฐะดะตัะถะตะบ โก

### ะะตะฝัะผะฐัะบะธ

```bash
# DNS ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
time dig @127.0.0.1 google.com  # ~5-10 ะผั

# Tor ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
time curl --socks5 127.0.0.1:9050 https://check.torproject.org  # ~1-3 ัะตะบ

# ะะฑััะฝัะน ััะฐัะธะบ (ะฑะตะท Tor)
time curl https://google.com  # ~50-100 ะผั
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะบะพะผะตะฝะดะฐัะธะธ

โ **ะะตะปะฐะนัะต:**
- ะัะฟะพะปัะทัะนัะต HTTPS ะฒัะตะณะดะฐ
- ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ัะธััะตะผั: `apt update && apt upgrade`
- ะัะฟะพะปัะทัะนัะต ัะธะปัะฝัะต ะฟะฐัะพะปะธ
- ะะณัะฐะฝะธัััะต ะดะพัััะฟ ะบ ัะตัะฒะตัั (firewall)
- ะัะพะฒะตััะนัะต ะปะพะณะธ: `journalctl -u tor -f`

โ **ะะต ะดะตะปะฐะนัะต:**
- ะะต ะธัะฟะพะปัะทัะนัะต ะดะปั ะฑะฐะฝะบะพะฒัะบะธั ะพะฟะตัะฐัะธะน ัะตัะตะท Tor
- ะะต ะฟะตัะตะดะฐะฒะฐะนัะต ะฟะฐัะพะปะธ ะฟะพ HTTP
- ะะต ะพัะบััะฒะฐะนัะต ะฟะพััั ะฝะฐััะถั ะฑะตะท firewall
- ะะต ะธัะฟะพะปัะทัะนัะต ัะปะฐะฑัะต ะฟะฐัะพะปะธ

### ะะฐัะธัะฐ ัะตัะฒะตัะฐ

```bash
# ะฃััะฐะฝะพะฒะธัั firewall
sudo apt install ufw

# ะะฐะทัะตัะธัั SSH
sudo ufw allow 22/tcp

# ะะฐะทัะตัะธัั DNS ะดะปั ะปะพะบะฐะปัะฝะพะน ัะตัะธ
sudo ufw allow from 192.168.0.0/16 to any port 53

# ะะบะปััะธัั firewall
sudo ufw enable

# ะัะพะฒะตัะธัั ััะฐััั
sudo ufw status
```

### ะะฑะฝะพะฒะปะตะฝะธั ะฑะตะทะพะฟะฐัะฝะพััะธ

```bash
# ะะฒัะพะผะฐัะธัะตัะบะธะต ะพะฑะฝะพะฒะปะตะฝะธั ะฑะตะทะพะฟะฐัะฝะพััะธ
sudo apt install unattended-upgrades
sudo dpkg-reconfigure -plow unattended-upgrades
```

### ะัะดะธั

```bash
# ะัะพะฒะตัะธัั ะพัะบััััะต ะฟะพััั
sudo ss -tulnp

# ะัะพะฒะตัะธัั iptables ะฟัะฐะฒะธะปะฐ
sudo iptables -L -n -v

# ะัะพะฒะตัะธัั ะฟัะพัะตััั
sudo ps aux | grep -E "tor|dnsmasq"

# ะัะพะฒะตัะธัั ะฟะพะดะบะปััะตะฝะธั Tor
sudo ss -tnp | grep tor
```

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

ะัะพะตะบั ะธัะฟะพะปัะทัะตั ะดะฐะฝะฝัะต ะธ ะธะดะตะธ ะธะท:

- [**antifilter.download**](https://antifilter.download/) โ ะฐะบััะฐะปัะฝัะต ัะฟะธัะบะธ ะฑะปะพะบะธัะพะฒะพะบ
- [**antizapret.info**](https://antizapret.info/) โ API ัะฟะธัะบะพะฒ ะธ ะผะตัะพะดะพะปะพะณะธั
- [**zapret-info**](https://github.com/zapret-info/z-i) โ ะพัะธัะธะฐะปัะฝัะน ัะตะตััั ะะะ
- [**Tor Project**](https://www.torproject.org/) โ ัะตัั ะฐะฝะพะฝะธะผะธะทะฐัะธะธ
- [**dnsmasq**](https://thekelleys.org.uk/dnsmasq/doc.html) โ ะปัะณะบะธะน DNS/DHCP ัะตัะฒะตั

ะกะฟะฐัะธะฑะพ ะฒัะตะผ ะบะพะฝััะธะฑัััะพัะฐะผ ะธ ัะพะพะฑัะตััะฒั ะทะฐ ะฟะพะดะดะตัะถะบั ัะฒะพะฑะพะดะฝะพะณะพ ะธะฝัะตัะฝะตัะฐ! ๐

## ๐ ะะธัะตะฝะทะธั

MIT License

```
Copyright (c) 2025 rublock-tor-debian12

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## ๐ ะะพะดะดะตัะถะบะฐ ะฟัะพะตะบัะฐ

ะัะปะธ ะฟัะพะตะบั ะฒะฐะผ ะฟะพะผะพะณ, ะฟะพััะฐะฒััะต โญ ะฝะฐ GitHub!

ะะฐัะปะธ ะฑะฐะณ? [ะกะพะทะดะฐะนัะต issue](https://github.com/grashooper/rublock-tor-debian12/issues)

ะััั ะธะดะตะธ? [Pull requests ะฟัะธะฒะตัััะฒััััั!](https://github.com/grashooper/rublock-tor-debian12/pulls)

---

**ะกะดะตะปะฐะฝะพ ั โค๏ธ ะดะปั ัะฒะพะฑะพะดะฝะพะณะพ ะธะฝัะตัะฝะตัะฐ**
